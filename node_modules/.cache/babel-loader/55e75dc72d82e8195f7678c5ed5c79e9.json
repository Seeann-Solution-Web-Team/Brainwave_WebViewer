{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\tank6\\\\Desktop\\\\React\\\\brainwave_webviewer\\\\src\\\\pages\\\\viewer.js\";\nimport React from 'react';\nimport logo from \".././logo.svg\";\nimport './viewer.css';\nimport CanvasGraph from './CanvasGraph';\nimport RHSFile from './RHSFile';\n\nclass WaveGraphPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      channels: 32,\n      count: 1000,\n      speed: 20,\n      canvasWidth: 1600,\n      isPlaying: false\n    };\n    this.graphRef = /*#__PURE__*/React.createRef();\n    this.onPlayStateChanged = this.onPlayStateChanged.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onPlayButtonClicked = this.onPlayButtonClicked.bind(this);\n    this.onResize = this.onResize.bind(this);\n    this.apply = this.apply.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      isPlaying: this.graphRef.isPlaying\n    });\n    this.onResize(); //fetch('http://localhost:3000/api');\n\n    window.addEventListener(\"resize\", this.onResize);\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.onResize);\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  apply(file) {\n    //apply to CanvasGraph\n    var ampData = file.getNormalizedAmpData();\n    this.setState({\n      channels: ampData.length\n    });\n    this.graphRef.setpeaks(ampData);\n  }\n\n  onPlayStateChanged() {\n    if (this.graphRef === null) return;\n    this.setState({\n      isPlaying: this.graphRef.isPlaying\n    });\n  }\n\n  onPlayButtonClicked(e) {\n    this.graphRef.togglePlay();\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === 32) this.graphRef.togglePlay();\n  }\n\n  onResize() {\n    this.setState({\n      canvasWidth: this.graphRef.getCanvas().getBoundingClientRect().width\n    });\n  }\n\n  setChannelCount(c) {\n    this.setState({\n      channels: c\n    });\n  }\n\n  setPeakCount(c) {\n    this.setState({\n      count: c\n    });\n  }\n\n  setSpeed(s) {\n    this.setState({\n      speed: s * 1\n    });\n  }\n\n  render() {\n    var btnStyle = {\n      height: '50px',\n      width: '50px'\n    };\n    var labelStyle = {\n      fontSize: '18px',\n      position: 'relative',\n      left: '0'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CanvasGraph, {\n        ref: ref => {\n          this.graphRef = ref;\n        },\n        height: \"25\",\n        width: this.state.canvasWidth,\n        channels: this.state.channels,\n        count: this.state.count,\n        speed: this.state.speed,\n        strokeColor: \"#FFFFFF\",\n        onPlayStateChanged: this.onPlayStateChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: labelStyle,\n          children: \"00:00/00:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.onPlayButtonClicked,\n          style: btnStyle,\n          children: this.state.isPlaying ? \"stop\" : \"play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass FileList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onFileSelected = this.onFileSelected.bind(this); //Request file list to back-end\n    //fetch(\"/files\");\n\n    this.state = {\n      fileList: [\"intan_save_210107_151441.rhs\"],\n      selectedFile: \"\"\n    };\n  }\n\n  onFileSelected() {\n    var selected = document.getElementById(\"fileList\").value;\n    if (selected === this.state.selectedFile) return;\n    this.setState({\n      selectedFile: selected\n    }); //Load File\n\n    var rhs = new RHSFile();\n    rhs.load(selected, this.props.onFileLoaded);\n  }\n\n  render() {\n    var options = [];\n\n    for (var i = 0; i < this.state.fileList.length; i++) {\n      options.push( /*#__PURE__*/_jsxDEV(\"option\", {\n        value: this.state.fileList[i],\n        children: this.state.fileList[i]\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 18\n      }, this));\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"fileList\",\n      className: \"files\",\n      onDoubleClick: this.onFileSelected,\n      multiple: true,\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass PlayerController extends React.Component {\n  constructor(props) {\n    super(props);\n    this.count_select_onchange = this.count_select_onchange.bind(this);\n    this.channel_select_onchange = this.channel_select_onchange.bind(this);\n    this.speed_select_onchange = this.speed_select_onchange.bind(this);\n  }\n\n  count_select_onchange() {\n    if (this.props.onCountChanged !== undefined) this.props.onCountChanged(document.getElementById(\"count_select\").value);\n  }\n\n  channel_select_onchange() {\n    if (this.props.onChannelChanged !== undefined) this.props.onChannelChanged(document.getElementById(\"channel_select\").value);\n  }\n\n  speed_select_onchange() {\n    if (this.props.onSpeedChanged !== undefined) this.props.onSpeedChanged(document.getElementById(\"speed_select\").value);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player_Controller\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uC544\\uC544\\uC544\\u314F\\u314F\\uC544\\uC544\\uC544\\uBA54\\uB274\\uC6B0\\uC6B0\\u315C\\uC6B0\\u3161\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uD655\\uB300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"count_select\",\n        defaultValue: \"1000\",\n        onChange: this.count_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"500\",\n          children: \"500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1000\",\n          children: \"1000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2500\",\n          children: \"2500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"5000\",\n          children: \"5000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uCC44\\uB110\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"channel_select\",\n        defaultValue: \"32\",\n        onChange: this.channel_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1\",\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2\",\n          children: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"4\",\n          children: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"8\",\n          children: \"8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"16\",\n          children: \"16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"32\",\n          children: \"32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uC7AC\\uC0DD \\uC18D\\uB3C4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"speed_select\",\n        defaultValue: \"20\",\n        onChange: this.speed_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1\",\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"10\",\n          children: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"20\",\n          children: \"20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"30\",\n          children: \"30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"40\",\n          children: \"40\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"50\",\n          children: \"50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.playerRef = /*#__PURE__*/React.createRef();\n    this.onCountChanged = this.onCountChanged.bind(this);\n    this.onChannelChanged = this.onChannelChanged.bind(this);\n    this.onSpeedChanged = this.onSpeedChanged.bind(this);\n    this.onFileLoaded = this.onFileLoaded.bind(this);\n  }\n\n  onCountChanged(v) {\n    this.playerRef.setPeakCount(v);\n  }\n\n  onChannelChanged(v) {\n    this.playerRef.setChannelCount(v);\n  }\n\n  onSpeedChanged(v) {\n    this.playerRef.setSpeed(v);\n  }\n\n  onFileLoaded(file) {\n    this.playerRef.graphRef.stop();\n    this.playerRef.apply(file);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Viewer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Viewer_Menu\",\n        children: [/*#__PURE__*/_jsxDEV(PlayerController, {\n          onCountChanged: this.onCountChanged,\n          onChannelChanged: this.onChannelChanged,\n          onSpeedChanged: this.onSpeedChanged\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(FileList, {\n          onFileLoaded: this.onFileLoaded\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Viewer_Graph\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          className: \"logo\",\n          alt: \"logo\",\n          width: \"100px\",\n          height: \"100px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(WaveGraphPlayer, {\n          ref: ref => {\n            this.playerRef = ref;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Viewer;","map":{"version":3,"sources":["C:/Users/tank6/Desktop/React/brainwave_webviewer/src/pages/viewer.js"],"names":["React","CanvasGraph","RHSFile","WaveGraphPlayer","Component","constructor","props","state","channels","count","speed","canvasWidth","isPlaying","graphRef","createRef","onPlayStateChanged","bind","onKeyDown","onPlayButtonClicked","onResize","apply","componentDidMount","setState","window","addEventListener","componentWillUnmount","removeEventListener","file","ampData","getNormalizedAmpData","length","setpeaks","e","togglePlay","keyCode","getCanvas","getBoundingClientRect","width","setChannelCount","c","setPeakCount","setSpeed","s","render","btnStyle","height","labelStyle","fontSize","position","left","ref","FileList","onFileSelected","fileList","selectedFile","selected","document","getElementById","value","rhs","load","onFileLoaded","options","i","push","PlayerController","count_select_onchange","channel_select_onchange","speed_select_onchange","onCountChanged","undefined","onChannelChanged","onSpeedChanged","Viewer","playerRef","v","stop","logo"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport logo from '.././logo.svg';\r\nimport './viewer.css';\r\nimport CanvasGraph from './CanvasGraph';\r\nimport RHSFile from './RHSFile'\r\n\r\nclass WaveGraphPlayer extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            channels: 32,\r\n            count: 1000,\r\n            speed: 20,\r\n            canvasWidth: 1600,\r\n            isPlaying: false\r\n        };\r\n\r\n        this.graphRef = React.createRef();\r\n\r\n        this.onPlayStateChanged = this.onPlayStateChanged.bind(this);\r\n        this.onKeyDown = this.onKeyDown.bind(this);\r\n        this.onPlayButtonClicked = this.onPlayButtonClicked.bind(this);\r\n        this.onResize = this.onResize.bind(this);\r\n\r\n        this.apply = this.apply.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.setState({isPlaying: this.graphRef.isPlaying});\r\n        this.onResize();\r\n        //fetch('http://localhost:3000/api');\r\n        window.addEventListener(\"resize\", this.onResize);\r\n        window.addEventListener(\"keydown\", this.onKeyDown);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener(\"resize\", this.onResize);\r\n        window.removeEventListener(\"keydown\", this.onKeyDown);\r\n    }\r\n\r\n    apply (file){\r\n        //apply to CanvasGraph\r\n        var ampData = file.getNormalizedAmpData();\r\n        this.setState({channels: ampData.length});\r\n        this.graphRef.setpeaks(ampData);\r\n    }\r\n\r\n    onPlayStateChanged(){\r\n        if (this.graphRef === null)\r\n            return;\r\n\r\n        this.setState({isPlaying: this.graphRef.isPlaying});\r\n    }\r\n\r\n    onPlayButtonClicked(e){\r\n        this.graphRef.togglePlay();\r\n    }\r\n\r\n    onKeyDown(e){\r\n        if (e.keyCode === 32)\r\n            this.graphRef.togglePlay();\r\n    }\r\n\r\n    onResize(){\r\n        this.setState({\r\n            canvasWidth: this.graphRef.getCanvas().getBoundingClientRect().width\r\n        });\r\n    }\r\n\r\n    setChannelCount (c){\r\n        this.setState({channels: c});\r\n    }\r\n\r\n    setPeakCount (c){\r\n        this.setState({count: c});\r\n    }\r\n\r\n    setSpeed(s){\r\n        this.setState({speed: s * 1});\r\n    }\r\n\r\n    render(){\r\n        var btnStyle={\r\n            height: '50px',\r\n            width: '50px'\r\n        }\r\n        var labelStyle={\r\n            fontSize: '18px',\r\n            position: 'relative',\r\n            left: '0'\r\n        }\r\n\r\n        return(\r\n        <div>\r\n            <CanvasGraph ref={ref=>{this.graphRef = ref;}}\r\n            height='25' width={this.state.canvasWidth}\r\n            channels={this.state.channels} count={this.state.count} speed={this.state.speed} \r\n            strokeColor=\"#FFFFFF\"\r\n            onPlayStateChanged={this.onPlayStateChanged}/>\r\n            <div>\r\n                <label style={labelStyle}>00:00/00:00</label>\r\n                <button onClick={this.onPlayButtonClicked} style={btnStyle}>\r\n                    {this.state.isPlaying ? \"stop\" : \"play\"}\r\n                </button>\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nclass FileList extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.onFileSelected = this.onFileSelected.bind(this);\r\n\r\n        //Request file list to back-end\r\n        //fetch(\"/files\");\r\n\r\n        this.state = {\r\n            fileList: [\"intan_save_210107_151441.rhs\"],\r\n            selectedFile: \"\"\r\n        };\r\n    }\r\n\r\n    onFileSelected (){\r\n        var selected = document.getElementById(\"fileList\").value;\r\n\r\n        if (selected === this.state.selectedFile)\r\n            return;\r\n\r\n        this.setState({selectedFile: selected});\r\n\r\n        //Load File\r\n        var rhs = new RHSFile();\r\n        rhs.load(selected, this.props.onFileLoaded);\r\n    }\r\n\r\n    render(){\r\n        var options = [];\r\n        for (var i = 0; i < this.state.fileList.length; i++){\r\n             options.push(\r\n                 <option key={i} value={this.state.fileList[i]}>{this.state.fileList[i]}</option>\r\n             )       \r\n        }\r\n\r\n        return (\r\n        <select id=\"fileList\" className=\"files\"  onDoubleClick={this.onFileSelected} multiple>\r\n            {options}\r\n        </select>);\r\n    }\r\n}\r\n\r\nclass PlayerController extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        this.count_select_onchange = this.count_select_onchange.bind(this);\r\n        this.channel_select_onchange = this.channel_select_onchange.bind(this);\r\n        this.speed_select_onchange = this.speed_select_onchange.bind(this);\r\n    }\r\n\r\n    count_select_onchange (){\r\n        if (this.props.onCountChanged !== undefined)\r\n            this.props.onCountChanged(document.getElementById(\"count_select\").value);\r\n    }\r\n\r\n    channel_select_onchange (){\r\n        if (this.props.onChannelChanged !== undefined)\r\n            this.props.onChannelChanged(document.getElementById(\"channel_select\").value);\r\n    }\r\n\r\n    speed_select_onchange(){\r\n        if (this.props.onSpeedChanged !== undefined)\r\n            this.props.onSpeedChanged(document.getElementById(\"speed_select\").value);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n        <div className=\"player_Controller\">\r\n            <span>아아아ㅏㅏ아아아메뉴우우ㅜ우ㅡ</span>\r\n            \r\n            <br/>\r\n            <br/>\r\n            <span>확대</span>\r\n            <select id=\"count_select\" defaultValue='1000' onChange={this.count_select_onchange}>\r\n                <option value='500'>500</option>\r\n                <option value='1000'>1000</option>\r\n                <option value='2500'>2500</option>\r\n                <option value='5000'>5000</option>\r\n            </select>\r\n\r\n            <br/>\r\n            <span>채널</span>\r\n            <select id=\"channel_select\" defaultValue='32' onChange={this.channel_select_onchange}>\r\n                <option value='1'>1</option>\r\n                <option value='2'>2</option>\r\n                <option value='4'>4</option>\r\n                <option value='8'>8</option>\r\n                <option value='16'>16</option>\r\n                <option value='32'>32</option>\r\n            </select>\r\n\r\n            <br/>\r\n            <span>재생 속도</span>\r\n            <select id=\"speed_select\" defaultValue='20' onChange={this.speed_select_onchange}>\r\n                <option value='1'>1</option>\r\n                <option value='10'>10</option>\r\n                <option value='20'>20</option>\r\n                <option value='30'>30</option>\r\n                <option value='40'>40</option>\r\n                <option value='50'>50</option>\r\n            </select>\r\n        </div>);\r\n    }\r\n}\r\n\r\nclass Viewer extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.playerRef = React.createRef();\r\n\r\n        this.onCountChanged = this.onCountChanged.bind(this);\r\n        this.onChannelChanged = this.onChannelChanged.bind(this);\r\n        this.onSpeedChanged = this.onSpeedChanged.bind(this);\r\n\r\n        this.onFileLoaded = this.onFileLoaded.bind(this);\r\n    }\r\n    \r\n    onCountChanged (v){\r\n        this.playerRef.setPeakCount(v);\r\n    }\r\n\r\n    onChannelChanged(v){\r\n        this.playerRef.setChannelCount(v);\r\n    }\r\n\r\n    onSpeedChanged(v){\r\n        this.playerRef.setSpeed(v);\r\n    }\r\n\r\n    onFileLoaded(file){\r\n        this.playerRef.graphRef.stop();\r\n        this.playerRef.apply(file);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n        <div className=\"Viewer\">\r\n            <div className=\"Viewer_Menu\">\r\n                <PlayerController\r\n                onCountChanged={this.onCountChanged}\r\n                onChannelChanged={this.onChannelChanged}\r\n                onSpeedChanged={this.onSpeedChanged}/>\r\n                <FileList onFileLoaded={this.onFileLoaded}/>\r\n            </div>\r\n            <div className=\"Viewer_Graph\">\r\n                <img src={logo} className=\"logo\" alt=\"logo\" \r\n                width='100px' height='100px'/>\r\n                <WaveGraphPlayer ref={ref=>{this.playerRef = ref;}} />\r\n            </div> \r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default Viewer;"]},"metadata":{},"sourceType":"module"}