{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\tank6\\\\Desktop\\\\React\\\\brainwave_webviewer\\\\src\\\\pages\\\\viewer.js\";\nimport React from 'react';\nimport logo from \".././logo.svg\";\nimport './viewer.css';\nimport CanvasGraph from './CanvasGraph';\nimport GLGraph from './GLGraph';\nimport RHSFile from './RHSFile';\n\nclass WaveGraphPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      timescale: 1000,\n      channels: 32,\n      speed: 1.0,\n      canvasWidth: 1600,\n      canvasHeight: 800,\n      isPlaying: false\n    };\n    this.graphRef = /*#__PURE__*/React.createRef();\n    this.currentFile = null;\n    this.onPlayStateChanged = this.onPlayStateChanged.bind(this);\n    this.onOffsetChanged = this.onOffsetChanged.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onPlayButtonClicked = this.onPlayButtonClicked.bind(this);\n    this.onResize = this.onResize.bind(this);\n    this.applyFile = this.applyFile.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      isPlaying: this.graphRef.isPlaying\n    }); //fetch('http://localhost:3000/api');\n\n    window.addEventListener(\"resize\", this.onResize);\n    window.addEventListener(\"keydown\", this.onKeyDown);\n    this.timeLabel = document.getElementById('timeLabel');\n    this.onResize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.onResize);\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  applyFile(file) {\n    //apply to CanvasGraph\n    var ampData = file.getNormalizedAmpData();\n    this.setState({\n      channels: ampData.length\n    });\n    this.currentFile = file;\n    this.graphRef.setfile(file);\n  }\n\n  onPlayStateChanged() {\n    if (this.graphRef === null) return;\n    this.setState({\n      isPlaying: this.graphRef.isPlaying\n    });\n  }\n\n  onOffsetChanged(p) {\n    if (this.currentFile === null) return;\n    var recordMin = Math.floor(this.currentFile.recordLength / 60).toString().padStart(2, '0');\n    var recordSec = (this.currentFile.recordLength % 60).toString().padStart(2, '0');\n    var current = Math.floor(p * this.currentFile.recordLength);\n    var currentMin = Math.floor(current / 60).toString().padStart(2, '0');\n    var currentSec = (current % 60).toString().padStart(2, '0');\n    this.timeLabel.innerHTML = currentMin + ':' + currentSec + '/' + recordMin + ':' + recordSec;\n  }\n\n  onPlayButtonClicked(e) {\n    this.graphRef.togglePlay();\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === 32) this.graphRef.togglePlay();else if (e.keyCode === 37) this.graphRef.prev();else if (e.keyCode === 39) this.graphRef.next();\n  }\n\n  onResize() {\n    var rt = this.graphRef.getCanvas().getBoundingClientRect();\n    this.setState({\n      canvasWidth: rt.width,\n      canvasHeight: rt.height\n    });\n  }\n\n  setChannelCount(c) {\n    this.setState({\n      channels: c\n    });\n  }\n\n  setTimeScale(v) {\n    this.setState({\n      timescale: v\n    });\n  }\n\n  setSpeed(s) {\n    this.setState({\n      speed: s * 1.0\n    });\n  }\n\n  setChannelSelection(selection) {\n    this.graphRef.setchannelsenabled(selection);\n    this.setState({\n      channels: selection.length\n    });\n  }\n\n  render() {\n    /*\r\n    var btnStyle={\r\n        height: '50px',\r\n        width: '50px'\r\n    }\r\n    */\n    var divStyle = {\n      height: '100%'\n    };\n    var labelStyle = {\n      fontSize: '18px',\n      display: 'flex',\n      alignSelf: 'start'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: divStyle,\n      children: [/*#__PURE__*/_jsxDEV(GLGraph, {\n        ref: ref => {\n          this.graphRef = ref;\n        },\n        width: this.state.canvasWidth,\n        height: this.state.canvasHeight,\n        margin: 10,\n        channels: this.state.channels,\n        timescale: this.state.timescale,\n        speed: this.state.speed,\n        strokeColor: \"#FFFFFF\",\n        onPlayStateChanged: this.onPlayStateChanged,\n        onOffsetChanged: this.onOffsetChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          id: \"timeLabel\",\n          style: labelStyle,\n          children: \"00:00/00:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this);\n    /*\r\n    <button onClick={this.onPlayButtonClicked} style={btnStyle}>\r\n                {this.state.isPlaying ? \"stop\" : \"play\"}\r\n            </button>\r\n     */\n  }\n\n}\n/*\r\nclass FileList extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.onFileSelected = this.onFileSelected.bind(this);\r\n        this.onProgressChanged = this.onProgressChanged.bind(this);\r\n\r\n        //Request file list to back-end\r\n        //fetch(\"/files\");\r\n\r\n        this.state = {\r\n            fileList: [\"intan_save_210107_151441.rhs\"],\r\n            selectedFile: \"\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.timeLabel = document.getElementById('timeLabel');\r\n    }\r\n\r\n    onFileSelected (){\r\n        var selected = document.getElementById(\"fileList\").value;\r\n\r\n        if (selected === this.state.selectedFile)\r\n            return;\r\n\r\n        this.setState({selectedFile: selected});\r\n        if (this.props.onFileLoadStart !== undefined)\r\n            this.props.onFileLoadStart();\r\n        \r\n        //Load File\r\n        var rhs = new RHSFile();\r\n        rhs.load(selected, this.props.onFileLoaded, this.onProgressChanged);\r\n    }\r\n\r\n    onProgressChanged (file, prog){\r\n        this.timeLabel.innerHTML = file.path + ' (' + Math.floor(prog) + ')%'\r\n    }\r\n\r\n    render(){\r\n        var options = [];\r\n        for (var i = 0; i < this.state.fileList.length; i++){\r\n             options.push(\r\n                 <option key={i} value={this.state.fileList[i]}>{this.state.fileList[i]}</option>\r\n             )\r\n        }\r\n\r\n        return (\r\n        <select id=\"fileList\" className=\"files\"  onDoubleClick={this.onFileSelected} multiple>\r\n            {options}\r\n        </select>);\r\n    }\r\n}\r\n*/\n\n\nclass ChannelList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      channelNameList: []\n    };\n    this.channelNameList_onchange = this.channelNameList_onchange.bind(this);\n  }\n\n  setChannelList(arr) {\n    var nameArr = [];\n    var i = 0;\n\n    for (i = 0; i < arr.length; i++) {\n      nameArr.push(arr[i].customName);\n    }\n\n    this.setState({\n      channelNameList: nameArr\n    }); //Deselect All\n\n    var elements = document.getElementById(\"channelNameList\").options;\n\n    for (i = 0; i < elements.length; i++) {\n      elements[i].selected = false;\n    }\n  }\n\n  channelNameList_onchange() {\n    var select = document.getElementById(\"channelNameList\");\n    var selectedIdx = [];\n    var len = select.options.length;\n\n    for (var i = 0; i < len; i++) {\n      if (select.options[i].selected) {\n        selectedIdx.push(i);\n      }\n    }\n\n    this.props.onSelectionChanged(selectedIdx);\n  }\n\n  render() {\n    var options = [];\n\n    for (var i = 0; i < this.state.channelNameList.length; i++) {\n      options.push( /*#__PURE__*/_jsxDEV(\"option\", {\n        value: this.state.channelNameList[i],\n        children: this.state.channelNameList[i]\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this));\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"channelNameList\",\n      className: \"files\",\n      onChange: this.channelNameList_onchange,\n      multiple: true,\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass PlayerController extends React.Component {\n  constructor(props) {\n    super(props);\n    this.play_onclick = this.play_onclick.bind(this);\n    this.stop_onclick = this.stop_onclick.bind(this);\n    this.replay_onclick = this.replay_onclick.bind(this);\n    this.timescale_select_onchange = this.timescale_select_onchange.bind(this);\n    this.channel_select_onchange = this.channel_select_onchange.bind(this);\n    this.speed_select_onchange = this.speed_select_onchange.bind(this);\n    this.filter_select_onchange = this.filter_select_onchange.bind(this);\n  }\n\n  play_onclick(e) {\n    if (this.props.onPlayButtonClicked !== undefined) this.props.onPlayButtonClicked();\n  }\n\n  stop_onclick(e) {\n    if (this.props.onPlayButtonClicked !== undefined) this.props.onStopButtonClicked();\n  }\n\n  replay_onclick(e) {\n    if (this.props.onPlayButtonClicked !== undefined) this.props.onReplayButtonClicked();\n  }\n\n  timescale_select_onchange() {\n    if (this.props.onTimeScaleChanged !== undefined) this.props.onTimeScaleChanged(document.getElementById(\"timescale_select\").value);\n  }\n\n  channel_select_onchange() {\n    if (this.props.onChannelChanged !== undefined) this.props.onChannelChanged(document.getElementById(\"channel_select\").value);\n  }\n\n  speed_select_onchange() {\n    if (this.props.onSpeedChanged !== undefined) this.props.onSpeedChanged(document.getElementById(\"speed_select\").value);\n  }\n\n  filter_select_onchange() {\n    if (this.props.onFilterChanged !== undefined) this.props.onFilterChanged(parseInt(document.getElementById(\"notch_freq_select\").value), parseInt(document.getElementById(\"highpass_cutoff_select\").value));\n  }\n\n  render() {\n    var st = {\n      fontSize: '24px'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player_Controller\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: st,\n        children: \"\\uC544\\uC544\\uC544\\u314F\\u314F\\uC544\\uC544\\uC544\\uBA54\\uB274\\uC6B0\\uC6B0\\u315C\\uC6B0\\u3161\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: this.play_onclick,\n          children: \"Play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: this.stop_onclick,\n          children: \"Stop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: this.replay_onclick,\n          children: \"Rewind\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"timescale\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"timescale_select\",\n        defaultValue: \"1000\",\n        onChange: this.timescale_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1\",\n          children: \"1ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"50\",\n          children: \"50ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"250\",\n          children: \"250ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"500\",\n          children: \"500ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1000\",\n          children: \"1000ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2500\",\n          children: \"2500ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"5000\",\n          children: \"5000ms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uC7AC\\uC0DD \\uC18D\\uB3C4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"speed_select\",\n        defaultValue: \"1.0\",\n        onChange: this.speed_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"0.1\",\n          children: \"x0.1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"0.25\",\n          children: \"x0.25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"0.5\",\n          children: \"x0.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1.0\",\n          children: \"x1.0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1.25\",\n          children: \"x1.25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1.5\",\n          children: \"x1.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2.0\",\n          children: \"x2.0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Notch Filter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"notch_freq_select\",\n        defaultValue: 0,\n        onChange: this.filter_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: 0,\n          children: \"None\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 50,\n          children: \"50Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 60,\n          children: \"60Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Highpass Filter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"highpass_cutoff_select\",\n        defaultValue: 0,\n        onChange: this.filter_select_onchange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: 0,\n          children: \"None\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 100,\n          children: \"100Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 150,\n          children: \"150Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 200,\n          children: \"200Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 250,\n          children: \"250Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 300,\n          children: \"300Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 350,\n          children: \"350Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 400,\n          children: \"400Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 450,\n          children: \"450Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 500,\n          children: \"500Hz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uB300\\uCDA9 \\uBA54\\uBAA8 \\uB4E4\\uC5B4\\uAC08\\uC790\\uB9AC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uB300\\uCDA9 \\uBA54\\uBAA8 \\uB4E4\\uC5B4\\uAC08\\uC790\\uB9AC2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uB300\\uCDA9 \\uBA54\\uBAA8 \\uB4E4\\uC5B4\\uAC08\\uC790\\uB9AC3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }, this);\n    /*\r\n    <span>채널</span>\r\n    <select id=\"channel_select\" defaultValue='32' onChange={this.channel_select_onchange}>\r\n        <option value='1'>1</option>\r\n        <option value='2'>2</option>\r\n        <option value='4'>4</option>\r\n        <option value='8'>8</option>\r\n        <option value='16'>16</option>\r\n        <option value='32'>32</option>\r\n    </select>\r\n    */\n  }\n\n}\n\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.playerRef = /*#__PURE__*/React.createRef();\n    this.channelListRef = /*#__PURE__*/React.createRef();\n    this.state = {\n      isLoading: false\n    };\n    this.onPlayButtonClicked = this.onPlayButtonClicked.bind(this);\n    this.onStopButtonClicked = this.onStopButtonClicked.bind(this);\n    this.onReplayButtonClicked = this.onReplayButtonClicked.bind(this);\n    this.onTimeScaleChanged = this.onTimeScaleChanged.bind(this);\n    this.onChannelChanged = this.onChannelChanged.bind(this);\n    this.onSpeedChanged = this.onSpeedChanged.bind(this);\n    this.onSelectionChanged = this.onSelectionChanged.bind(this);\n    this.onFilterChanged = this.onFilterChanged.bind(this);\n    this.onFileLoadStart = this.onFileLoadStart.bind(this);\n    this.onLoadingProgressChanged = this.onLoadingProgressChanged.bind(this);\n    this.onFileLoaded = this.onFileLoaded.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.filePath === undefined) return; //Load File\n\n    var rhs = new RHSFile();\n    this.setState({\n      isLoading: true\n    });\n    rhs.load(this.props.match.params.filePath, this.onFileLoaded, this.onLoadingProgressChanged);\n  }\n\n  onPlayButtonClicked() {\n    this.playerRef.graphRef.play();\n  }\n\n  onStopButtonClicked() {\n    this.playerRef.graphRef.stop();\n  }\n\n  onReplayButtonClicked() {\n    this.playerRef.graphRef.setoffset(0.0);\n  }\n\n  onTimeScaleChanged(v) {\n    this.playerRef.setTimeScale(v);\n  }\n\n  onChannelChanged(v) {\n    this.playerRef.setChannelCount(v);\n  }\n\n  onSpeedChanged(v) {\n    this.playerRef.setSpeed(v);\n  }\n\n  onSelectionChanged(arr) {\n    this.playerRef.setChannelSelection(arr);\n  }\n\n  onFilterChanged(notch, hpCutoff) {\n    this.playerRef.graphRef.changeFilter(notch, hpCutoff);\n  }\n\n  onFileLoadStart() {\n    this.playerRef.currentFile = null;\n    this.playerRef.graphRef.stop();\n    this.setState({\n      isLoading: true\n    });\n  }\n\n  onLoadingProgressChanged(file, prog) {\n    //console.log(prog + '%');\n    var loadingTxt = document.getElementById(\"loadingTxt\");\n\n    if (loadingTxt !== undefined) {\n      loadingTxt.innerHTML = 'LOADING (' + Math.floor(prog * 10) * 0.1 + '%)';\n    }\n  }\n\n  onFileLoaded(file) {\n    if (file.isInitialized) {\n      this.playerRef.graphRef.stop();\n      this.playerRef.applyFile(file);\n      this.channelListRef.current.setChannelList(file.getChannelData());\n    } else {\n      alert('Failed to get file ' + file.path);\n    }\n\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  render() {\n    const loadingScreenStyle = {\n      margin: '0',\n      width: '100vw',\n      height: '100vh',\n      backgroundColor: '#282c3480',\n      zIndex: '2',\n      position: 'absolute'\n    };\n    const loadingTxtStyle = {\n      top: '50%',\n      fontSize: '24px',\n      transform: 'translateY(-50%)',\n      position: 'absolute'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Viewer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Viewer_Menu\",\n        children: [/*#__PURE__*/_jsxDEV(PlayerController, {\n          onPlayButtonClicked: this.onPlayButtonClicked,\n          onStopButtonClicked: this.onStopButtonClicked,\n          onReplayButtonClicked: this.onReplayButtonClicked,\n          onTimeScaleChanged: this.onTimeScaleChanged,\n          onChannelChanged: this.onChannelChanged,\n          onSpeedChanged: this.onSpeedChanged,\n          onFilterChanged: this.onFilterChanged\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(ChannelList, {\n          ref: this.channelListRef,\n          onFileLoadStart: this.onFileLoadStart,\n          onFileLoaded: this.onFileLoaded,\n          onSelectionChanged: this.onSelectionChanged\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Viewer_Graph\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          draggable: \"false\",\n          className: \"logo\",\n          alt: \"logo\",\n          width: \"50px\",\n          height: \"50px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(WaveGraphPlayer, {\n          ref: ref => {\n            this.playerRef = ref;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 13\n      }, this), this.state.isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: loadingScreenStyle,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"loadingTxt\",\n          style: loadingTxtStyle,\n          children: \"LOADING\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 14\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Viewer;","map":{"version":3,"sources":["C:/Users/tank6/Desktop/React/brainwave_webviewer/src/pages/viewer.js"],"names":["React","CanvasGraph","GLGraph","RHSFile","WaveGraphPlayer","Component","constructor","props","state","timescale","channels","speed","canvasWidth","canvasHeight","isPlaying","graphRef","createRef","currentFile","onPlayStateChanged","bind","onOffsetChanged","onKeyDown","onPlayButtonClicked","onResize","applyFile","componentDidMount","setState","window","addEventListener","timeLabel","document","getElementById","componentWillUnmount","removeEventListener","file","ampData","getNormalizedAmpData","length","setfile","p","recordMin","Math","floor","recordLength","toString","padStart","recordSec","current","currentMin","currentSec","innerHTML","e","togglePlay","keyCode","prev","next","rt","getCanvas","getBoundingClientRect","width","height","setChannelCount","c","setTimeScale","v","setSpeed","s","setChannelSelection","selection","setchannelsenabled","render","divStyle","labelStyle","fontSize","display","alignSelf","ref","ChannelList","channelNameList","channelNameList_onchange","setChannelList","arr","nameArr","i","push","customName","elements","options","selected","select","selectedIdx","len","onSelectionChanged","PlayerController","play_onclick","stop_onclick","replay_onclick","timescale_select_onchange","channel_select_onchange","speed_select_onchange","filter_select_onchange","undefined","onStopButtonClicked","onReplayButtonClicked","onTimeScaleChanged","value","onChannelChanged","onSpeedChanged","onFilterChanged","parseInt","st","Viewer","playerRef","channelListRef","isLoading","onFileLoadStart","onLoadingProgressChanged","onFileLoaded","match","params","filePath","rhs","load","play","stop","setoffset","notch","hpCutoff","changeFilter","prog","loadingTxt","isInitialized","getChannelData","alert","path","loadingScreenStyle","margin","backgroundColor","zIndex","position","loadingTxtStyle","top","transform","logo"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport logo from '.././logo.svg';\r\nimport './viewer.css';\r\nimport CanvasGraph from './CanvasGraph';\r\nimport GLGraph from './GLGraph'\r\nimport RHSFile from './RHSFile'\r\n\r\nclass WaveGraphPlayer extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            timescale: 1000,\r\n            channels: 32,\r\n            speed: 1.0,\r\n            canvasWidth: 1600,\r\n            canvasHeight: 800,\r\n            isPlaying: false\r\n        };\r\n\r\n        this.graphRef = React.createRef();\r\n        this.currentFile = null;\r\n\r\n        this.onPlayStateChanged = this.onPlayStateChanged.bind(this);\r\n        this.onOffsetChanged = this.onOffsetChanged.bind(this);\r\n        this.onKeyDown = this.onKeyDown.bind(this);\r\n        this.onPlayButtonClicked = this.onPlayButtonClicked.bind(this);\r\n        this.onResize = this.onResize.bind(this);\r\n\r\n        this.applyFile = this.applyFile.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.setState({isPlaying: this.graphRef.isPlaying});\r\n        //fetch('http://localhost:3000/api');\r\n        window.addEventListener(\"resize\", this.onResize);\r\n        window.addEventListener(\"keydown\", this.onKeyDown);\r\n\r\n        this.timeLabel = document.getElementById('timeLabel');\r\n\r\n        this.onResize();\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener(\"resize\", this.onResize);\r\n        window.removeEventListener(\"keydown\", this.onKeyDown);\r\n    }\r\n\r\n    applyFile (file){\r\n        //apply to CanvasGraph\r\n        var ampData = file.getNormalizedAmpData();\r\n        this.setState({channels: ampData.length});\r\n        this.currentFile = file;\r\n        this.graphRef.setfile(file);\r\n    }\r\n\r\n    onPlayStateChanged(){\r\n        if (this.graphRef === null)\r\n            return;\r\n\r\n        this.setState({isPlaying: this.graphRef.isPlaying});\r\n    }\r\n\r\n    onOffsetChanged(p){\r\n        if (this.currentFile === null)\r\n            return;\r\n        \r\n        var recordMin = (Math.floor(this.currentFile.recordLength / 60)).toString().padStart(2, '0');\r\n        var recordSec = (this.currentFile.recordLength % 60).toString().padStart(2, '0');\r\n\r\n        var current = Math.floor(p * this.currentFile.recordLength);\r\n        var currentMin = (Math.floor(current / 60)).toString().padStart(2, '0');\r\n        var currentSec = (current % 60).toString().padStart(2, '0');\r\n\r\n        this.timeLabel.innerHTML = currentMin + ':' + currentSec + '/' + recordMin + ':' + recordSec;\r\n    }\r\n\r\n    onPlayButtonClicked(e){\r\n        this.graphRef.togglePlay();\r\n    }\r\n\r\n    onKeyDown(e){\r\n        if (e.keyCode === 32)\r\n            this.graphRef.togglePlay();\r\n        else if (e.keyCode === 37)\r\n            this.graphRef.prev();\r\n        else if (e.keyCode === 39)\r\n            this.graphRef.next();\r\n    }\r\n    onResize(){\r\n        var rt = this.graphRef.getCanvas().getBoundingClientRect();\r\n        this.setState({\r\n            canvasWidth: rt.width,\r\n            canvasHeight: rt.height\r\n        });\r\n    }\r\n\r\n    setChannelCount (c){\r\n        this.setState({channels: c});\r\n    }\r\n\r\n    setTimeScale (v){\r\n        this.setState({timescale: v});\r\n    }\r\n\r\n    setSpeed(s){\r\n        this.setState({speed: s * 1.0});\r\n    }\r\n\r\n    setChannelSelection(selection){\r\n        this.graphRef.setchannelsenabled(selection);\r\n        this.setState({channels: selection.length});\r\n    }\r\n\r\n    render(){\r\n        /*\r\n        var btnStyle={\r\n            height: '50px',\r\n            width: '50px'\r\n        }\r\n        */\r\n        var divStyle={\r\n            height: '100%'\r\n        }\r\n\r\n        var labelStyle={\r\n            fontSize: '18px',\r\n            display: 'flex',\r\n            alignSelf: 'start'\r\n        }\r\n\r\n        return(\r\n        <div style={divStyle}>\r\n            <GLGraph ref={ref=>{this.graphRef = ref;}}\r\n            width={this.state.canvasWidth} height={this.state.canvasHeight} margin={10}\r\n            channels={this.state.channels} timescale={this.state.timescale} speed={this.state.speed} \r\n            strokeColor=\"#FFFFFF\"\r\n            onPlayStateChanged={this.onPlayStateChanged}\r\n            onOffsetChanged={this.onOffsetChanged}/>\r\n            <div>\r\n                <label id='timeLabel' style={labelStyle}>00:00/00:00</label>\r\n            </div>\r\n        </div>);\r\n\r\n        /*\r\n        <button onClick={this.onPlayButtonClicked} style={btnStyle}>\r\n                    {this.state.isPlaying ? \"stop\" : \"play\"}\r\n                </button>\r\n         */\r\n    }\r\n}\r\n\r\n/*\r\nclass FileList extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.onFileSelected = this.onFileSelected.bind(this);\r\n        this.onProgressChanged = this.onProgressChanged.bind(this);\r\n\r\n        //Request file list to back-end\r\n        //fetch(\"/files\");\r\n\r\n        this.state = {\r\n            fileList: [\"intan_save_210107_151441.rhs\"],\r\n            selectedFile: \"\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.timeLabel = document.getElementById('timeLabel');\r\n    }\r\n\r\n    onFileSelected (){\r\n        var selected = document.getElementById(\"fileList\").value;\r\n\r\n        if (selected === this.state.selectedFile)\r\n            return;\r\n\r\n        this.setState({selectedFile: selected});\r\n        if (this.props.onFileLoadStart !== undefined)\r\n            this.props.onFileLoadStart();\r\n        \r\n        //Load File\r\n        var rhs = new RHSFile();\r\n        rhs.load(selected, this.props.onFileLoaded, this.onProgressChanged);\r\n    }\r\n\r\n    onProgressChanged (file, prog){\r\n        this.timeLabel.innerHTML = file.path + ' (' + Math.floor(prog) + ')%'\r\n    }\r\n\r\n    render(){\r\n        var options = [];\r\n        for (var i = 0; i < this.state.fileList.length; i++){\r\n             options.push(\r\n                 <option key={i} value={this.state.fileList[i]}>{this.state.fileList[i]}</option>\r\n             )\r\n        }\r\n\r\n        return (\r\n        <select id=\"fileList\" className=\"files\"  onDoubleClick={this.onFileSelected} multiple>\r\n            {options}\r\n        </select>);\r\n    }\r\n}\r\n*/\r\n\r\nclass ChannelList extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            channelNameList: []\r\n        }\r\n\r\n        this.channelNameList_onchange = this.channelNameList_onchange.bind(this);\r\n    }\r\n\r\n    setChannelList(arr){\r\n        var nameArr = [];\r\n        var i = 0;\r\n        for (i = 0; i < arr.length; i++){\r\n            nameArr.push(arr[i].customName);\r\n        }\r\n\r\n        this.setState({\r\n            channelNameList: nameArr\r\n        });\r\n\r\n        //Deselect All\r\n        var elements = document.getElementById(\"channelNameList\").options;\r\n\r\n        for (i = 0; i < elements.length; i++){\r\n            elements[i].selected = false;\r\n        }\r\n    }\r\n\r\n    channelNameList_onchange(){\r\n        var select = document.getElementById(\"channelNameList\");\r\n        var selectedIdx = [];\r\n        var len = select.options.length;\r\n\r\n        for (var i = 0; i < len; i++){\r\n            if (select.options[i].selected){\r\n                selectedIdx.push(i);\r\n            }\r\n        }\r\n\r\n        this.props.onSelectionChanged(selectedIdx);\r\n    }\r\n\r\n    render(){\r\n        var options = [];\r\n        for (var i = 0; i < this.state.channelNameList.length; i++){\r\n            options.push(\r\n                <option key={i} value={this.state.channelNameList[i]}>\r\n                    {this.state.channelNameList[i]}\r\n                </option>);\r\n        }\r\n\r\n        return (\r\n        <select id=\"channelNameList\" className=\"files\" onChange={this.channelNameList_onchange} multiple>\r\n            {options}\r\n        </select>);\r\n    }\r\n}\r\n\r\nclass PlayerController extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        this.play_onclick = this.play_onclick.bind(this);\r\n        this.stop_onclick = this.stop_onclick.bind(this);\r\n        this.replay_onclick = this.replay_onclick.bind(this);\r\n\r\n        this.timescale_select_onchange = this.timescale_select_onchange.bind(this);\r\n        this.channel_select_onchange = this.channel_select_onchange.bind(this);\r\n        this.speed_select_onchange = this.speed_select_onchange.bind(this);\r\n        this.filter_select_onchange = this.filter_select_onchange.bind(this);\r\n    }\r\n\r\n    play_onclick(e){\r\n        if (this.props.onPlayButtonClicked !== undefined)\r\n            this.props.onPlayButtonClicked();\r\n    }\r\n\r\n    stop_onclick(e){\r\n        if (this.props.onPlayButtonClicked !== undefined)\r\n            this.props.onStopButtonClicked();\r\n    }\r\n\r\n    replay_onclick(e){\r\n        if (this.props.onPlayButtonClicked !== undefined)\r\n            this.props.onReplayButtonClicked();\r\n    }\r\n\r\n    timescale_select_onchange (){\r\n        if (this.props.onTimeScaleChanged !== undefined)\r\n            this.props.onTimeScaleChanged(document.getElementById(\"timescale_select\").value);\r\n    }\r\n\r\n    channel_select_onchange (){\r\n        if (this.props.onChannelChanged !== undefined)\r\n            this.props.onChannelChanged(document.getElementById(\"channel_select\").value);\r\n    }\r\n\r\n    speed_select_onchange(){\r\n        if (this.props.onSpeedChanged !== undefined)\r\n            this.props.onSpeedChanged(document.getElementById(\"speed_select\").value);\r\n    }\r\n\r\n    filter_select_onchange(){\r\n        if (this.props.onFilterChanged !== undefined)\r\n            this.props.onFilterChanged( parseInt(document.getElementById(\"notch_freq_select\").value), \r\n                                        parseInt(document.getElementById(\"highpass_cutoff_select\").value));\r\n    }\r\n\r\n    render(){\r\n        var st = {\r\n            fontSize: '24px',\r\n        }\r\n\r\n        return (\r\n        <div className=\"player_Controller\">\r\n            <span style={st}>아아아ㅏㅏ아아아메뉴우우ㅜ우ㅡ</span>\r\n            <br/>\r\n            <br/>\r\n            <div>\r\n                <button className='btn btn-secondary' onClick={this.play_onclick}>Play</button>\r\n                <button className='btn btn-secondary' onClick={this.stop_onclick}>Stop</button>\r\n                <button className='btn btn-secondary' onClick={this.replay_onclick}>Rewind</button>\r\n            </div>\r\n            <br/>\r\n            <span>timescale</span>\r\n            <select id=\"timescale_select\" defaultValue='1000' onChange={this.timescale_select_onchange}>\r\n                <option value='1'>1ms</option>\r\n                <option value='50'>50ms</option>\r\n                <option value='250'>250ms</option>\r\n                <option value='500'>500ms</option>\r\n                <option value='1000'>1000ms</option>\r\n                <option value='2500'>2500ms</option>\r\n                <option value='5000'>5000ms</option>\r\n            </select>\r\n\r\n            <br/>\r\n            <br/>\r\n            <span>재생 속도</span>\r\n            <select id=\"speed_select\" defaultValue='1.0' onChange={this.speed_select_onchange}>\r\n                <option value='0.1'>x0.1</option>\r\n                <option value='0.25'>x0.25</option>\r\n                <option value='0.5'>x0.5</option>\r\n                <option value='1.0'>x1.0</option>\r\n                <option value='1.25'>x1.25</option>\r\n                <option value='1.5'>x1.5</option>\r\n                <option value='2.0'>x2.0</option>\r\n            </select>\r\n            \r\n            <br/>\r\n            <br/>\r\n            <span>Notch Filter</span>\r\n            <select id=\"notch_freq_select\" defaultValue={0} onChange={this.filter_select_onchange}>\r\n                <option value={0}>None</option>\r\n                <option value={50}>50Hz</option>\r\n                <option value={60}>60Hz</option>\r\n            </select>\r\n\r\n            <br/>\r\n            <br/>\r\n            <span>Highpass Filter</span>\r\n            <select id=\"highpass_cutoff_select\" defaultValue={0} onChange={this.filter_select_onchange}>\r\n                <option value={0}>None</option>\r\n                <option value={100}>100Hz</option>\r\n                <option value={150}>150Hz</option>\r\n                <option value={200}>200Hz</option>\r\n                <option value={250}>250Hz</option>\r\n                <option value={300}>300Hz</option>\r\n                <option value={350}>350Hz</option>\r\n                <option value={400}>400Hz</option>\r\n                <option value={450}>450Hz</option>\r\n                <option value={500}>500Hz</option>\r\n            </select>\r\n\r\n            <br/><br/><br/>\r\n            <span>대충 메모 들어갈자리</span>\r\n            <br/><br/>\r\n            <span>대충 메모 들어갈자리2</span>\r\n            <br/><br/>\r\n            <span>대충 메모 들어갈자리3</span>\r\n        </div>);\r\n\r\n        /*\r\n        <span>채널</span>\r\n        <select id=\"channel_select\" defaultValue='32' onChange={this.channel_select_onchange}>\r\n            <option value='1'>1</option>\r\n            <option value='2'>2</option>\r\n            <option value='4'>4</option>\r\n            <option value='8'>8</option>\r\n            <option value='16'>16</option>\r\n            <option value='32'>32</option>\r\n        </select>\r\n        */\r\n    }\r\n}\r\n\r\nclass Viewer extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.playerRef = React.createRef();\r\n        this.channelListRef = React.createRef();\r\n        this.state={isLoading: false};\r\n\r\n        this.onPlayButtonClicked = this.onPlayButtonClicked.bind(this);\r\n        this.onStopButtonClicked = this.onStopButtonClicked.bind(this);\r\n        this.onReplayButtonClicked = this.onReplayButtonClicked.bind(this);\r\n\r\n        this.onTimeScaleChanged = this.onTimeScaleChanged.bind(this);\r\n        this.onChannelChanged = this.onChannelChanged.bind(this);\r\n        this.onSpeedChanged = this.onSpeedChanged.bind(this);\r\n        this.onSelectionChanged = this.onSelectionChanged.bind(this);\r\n        this.onFilterChanged = this.onFilterChanged.bind(this);\r\n\r\n        this.onFileLoadStart = this.onFileLoadStart.bind(this);\r\n        this.onLoadingProgressChanged = this.onLoadingProgressChanged.bind(this);\r\n        this.onFileLoaded = this.onFileLoaded.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        if (this.props.match.params.filePath === undefined)\r\n            return;\r\n\r\n        //Load File\r\n        var rhs = new RHSFile();\r\n        this.setState({isLoading: true});\r\n        rhs.load(this.props.match.params.filePath, this.onFileLoaded, this.onLoadingProgressChanged);\r\n    }\r\n\r\n    onPlayButtonClicked(){\r\n        this.playerRef.graphRef.play();\r\n    }\r\n\r\n    onStopButtonClicked(){\r\n        this.playerRef.graphRef.stop();\r\n    }\r\n\r\n    onReplayButtonClicked(){\r\n        this.playerRef.graphRef.setoffset(0.0);\r\n    }\r\n    \r\n    onTimeScaleChanged (v){\r\n        this.playerRef.setTimeScale(v);\r\n    }\r\n\r\n    onChannelChanged(v){\r\n        this.playerRef.setChannelCount(v);\r\n    }\r\n\r\n    onSpeedChanged(v){\r\n        this.playerRef.setSpeed(v);\r\n    }\r\n\r\n    onSelectionChanged(arr){\r\n        this.playerRef.setChannelSelection(arr);\r\n    }\r\n\r\n    onFilterChanged(notch, hpCutoff){\r\n        this.playerRef.graphRef.changeFilter(notch, hpCutoff);\r\n    }\r\n\r\n    onFileLoadStart(){\r\n        this.playerRef.currentFile = null;\r\n        this.playerRef.graphRef.stop();\r\n        this.setState({isLoading: true});\r\n    }\r\n\r\n    onLoadingProgressChanged(file, prog){\r\n        //console.log(prog + '%');\r\n\r\n        var loadingTxt = document.getElementById(\"loadingTxt\");\r\n\r\n        if (loadingTxt !== undefined){\r\n            loadingTxt.innerHTML = 'LOADING (' + (Math.floor(prog * 10) * 0.1) + '%)';\r\n        }\r\n    }\r\n\r\n    onFileLoaded(file){\r\n        if (file.isInitialized){\r\n            this.playerRef.graphRef.stop();\r\n            this.playerRef.applyFile(file);\r\n\r\n            this.channelListRef.current.setChannelList(file.getChannelData());\r\n        }\r\n        else{\r\n            alert('Failed to get file ' + file.path);\r\n        }\r\n\r\n        this.setState({isLoading: false});\r\n    }\r\n\r\n    render(){\r\n        const loadingScreenStyle={\r\n            margin: '0',\r\n            width: '100vw',\r\n            height: '100vh',\r\n            backgroundColor: '#282c3480',\r\n            zIndex: '2',\r\n            position: 'absolute'\r\n        }\r\n\r\n        const loadingTxtStyle={\r\n            top: '50%',\r\n            fontSize: '24px',\r\n            transform: 'translateY(-50%)',\r\n            position: 'absolute'\r\n        }\r\n\r\n        return (\r\n        <div className=\"Viewer\">\r\n            <div className=\"Viewer_Menu\">\r\n                <PlayerController\r\n                onPlayButtonClicked={this.onPlayButtonClicked}\r\n                onStopButtonClicked={this.onStopButtonClicked}\r\n                onReplayButtonClicked={this.onReplayButtonClicked}\r\n                onTimeScaleChanged={this.onTimeScaleChanged}\r\n                onChannelChanged={this.onChannelChanged}\r\n                onSpeedChanged={this.onSpeedChanged}\r\n                onFilterChanged={this.onFilterChanged}/>\r\n                <ChannelList \r\n                ref={this.channelListRef}\r\n                onFileLoadStart={this.onFileLoadStart} \r\n                onFileLoaded={this.onFileLoaded}\r\n                onSelectionChanged={this.onSelectionChanged}/>\r\n            </div>\r\n            <div className=\"Viewer_Graph\">\r\n                <img src={logo} draggable='false' className=\"logo\" alt=\"logo\" \r\n                width='50px' height='50px'/>\r\n                <WaveGraphPlayer ref={ref=>{this.playerRef = ref;}} />\r\n            </div> \r\n            {this.state.isLoading ? \r\n            (<div style={loadingScreenStyle}>\r\n                <span id='loadingTxt' style={loadingTxtStyle}>LOADING</span>\r\n            </div>) : \r\n            (<div/>)}\r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default Viewer;"]},"metadata":{},"sourceType":"module"}